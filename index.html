<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <title>Nedelja - Pregled termina</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    .calendar {
      display: grid;
      grid-template-columns: 100px repeat(7, 1fr);
      overflow-x: auto;
    }
    .day, .time {
      border: 1px solid #ccc;
      padding: 8px;
      min-height: 40px;
      box-sizing: border-box;
    }
    .time {
      background: #f0f0f0;
      position: sticky;
      left: 0;
      z-index: 2;
    }
    .header {
      background: #ddd;
      font-weight: bold;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 3;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="calendar" id="calendar">
    <!-- Header -->
    <div class="time header">Vreme</div>
    <div class="day header" data-day="0">Ponedeljak</div>
    <div class="day header" data-day="1">Utorak</div>
    <div class="day header" data-day="2">Sreda</div>
    <div class="day header" data-day="3">Četvrtak</div>
    <div class="day header" data-day="4">Petak</div>
    <div class="day header" data-day="5">Subota</div>
    <div class="day header" data-day="6">Nedelja</div>

    <!-- Time slots -->
    <!-- Radno vreme od 10 do 18h -->
    <script>
      const calendar = document.getElementById('calendar');
      for (let hour = 10; hour < 18; hour++) {
        const timeCell = document.createElement('div');
        timeCell.className = 'time';
        timeCell.textContent = `${hour}:00`;
        calendar.appendChild(timeCell);

        for (let day = 0; day < 7; day++) {
          const cell = document.createElement('div');
          cell.className = 'day';
          cell.dataset.day = day;
          // Dummy sadržaj da testiramo prazne/neprazne ćelije
          // if (Math.random() > 0.7) cell.textContent = 'Termin'; // (ako želiš da testiraš sadržaj)
          calendar.appendChild(cell);
        }
      }

      // Sakrij prazne kolone (osim headera)
      for (let day = 0; day < 7; day++) {
        const cells = Array.from(document.querySelectorAll(`.day[data-day="${day}"]`));
        const hasContent = cells.some(cell => cell.textContent.trim() !== '');
        if (!hasContent) {
          cells.forEach(cell => cell.classList.add('hidden'));
          document.querySelector(`.header[data-day="${day}"]`).classList.add('hidden');
        }
      }

      // Sakrij prošle dane u nedelji ako je prošlo 20:00
      const now = new Date();
      const danUNedelji = now.getDay(); // 0 = nedelja, 1 = ponedeljak, ...
      const sati = now.getHours();
      const minuti = now.getMinutes();

      // Ako je prošlo 20:00, sakrij sve prethodne dane
      const hideDays = (sati >= 20);

      if (hideDays) {
        for (let day = 0; day < danUNedelji; day++) {
          const cells = Array.from(document.querySelectorAll(`.day[data-day="${(day + 6) % 7}"]`)); 
          // Pomera dan tako da 0 bude ponedeljak (jer je u našem rasporedu tako)
          cells.forEach(cell => cell.classList.add('hidden'));
          const header = document.querySelector(`.header[data-day="${(day + 6) % 7}"]`);
          if (header) header.classList.add('hidden');
        }
      }
    </script>
  </div>
</body>
</html>
